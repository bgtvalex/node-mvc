<%- include('partials/head.ejs') %>


<h1><%= title %></h1>

<div class="card">
  <div class="card-info">
    <span><%= post.createdAt.toLocaleDateString() || 'no date' %></span><br>
    <span><%= post.author %></span>
  </div>

  <h2><%= post.title %></h2>
  <p><%= post.text %></p>

  <div class="del" data-id="<%= post.id %>">del</div>
  
  <a href="/edit/<%= post.id %>">edit</a>
</div>


<script>
  document.addEventListener('click', (e) => {
    const id = e.target?.dataset?.id || null
    if (id) {
      fetch(`/posts/${id}`, {
        method: 'DELETE'
      }).then(() => {
        window.location.href = '/posts'
      })
    }
  })
</script>
  
  
</body>
</html>